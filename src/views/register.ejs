<!DOCTYPE html>
<html lang="ko">
  <head>
    <%- include('head'); -%>
    <title>Register</title>
  </head>
  <body>
    <div class="container">
      <div class="row mt-4">
        <div class="col-6">
          <h2>회원 가입</h2>
          <hr class="mb-3" />
          <div>
            <% if (errors !== " ") {%> <% errors.forEach(function(item) { %>
            <div class="alert alert-danger"><%- item %></div>
            <% });%> <%}%>
          </div>
          <form method="POST" action="/register">
            <div class="form-group">
              <label for="id">아이디</label>
              <input class="form-control" type="text" name="id" required />
            </div>
            <div class="form-group">
              <label for="password">비밀번호</label>
              <input
                class="form-control"
                type="password"
                name="password"
                required
              />
            </div>
            <div class="form-group">
              <label for="confirmPassword">비밀번호 확인</label>
              <input
                class="form-control"
                type="password"
                name="confirmPassword"
                required
              />
            </div>
            <div class="form-group">
              <label for="name">이름</label>
              <input class="form-control" type="text" name="name" required />
            </div>
            <div class="form-group">
              <label for="gender">성별</label>
              <div>
                <label for="male" class="radio"
                  ><input type="radio" name="gender" value="M" id="male" /> 남자
                </label>
                <label for="female" class="radio"
                  ><input type="radio" name="gender" value="F" id="female" />
                  여자
                </label>
              </div>
            </div>
            <div class="form-group">
              <label for="address">주소</label>
              <div>
                <label for="gangnam" class="radio"
                  ><input
                    type="radio"
                    name="address"
                    value="강남"
                    id="gangnam"
                  />
                  강남
                </label>
                <label for="seocho" class="radio"
                  ><input
                    type="radio"
                    name="address"
                    value="서초"
                    id="seocho"
                  />
                  서초
                </label>
                <label for="yongsan" class="radio"
                  ><input
                    type="radio"
                    name="address"
                    value="용산"
                    id="yongsan"
                  />
                  용산
                </label>
                <label for="mapo" class="radio"
                  ><input type="radio" name="address" value="마포" id="mapo" />
                  마포
                </label>
                <label for="seodaemun" class="radio"
                  ><input
                    type="radio"
                    name="address"
                    value="서대문"
                    id="seodaemun"
                  />
                  서대문
                </label>
              </div>
            </div>
            <div class="form-group">
              <label for="birthdate">생년월일</label>
              <input
                class="form-control"
                type="date"
                name="birthdate"
                required
              />
            </div>
            <div class="form-group">
              <label for="pnum">전화번호</label>
              <input
                class="form-control"
                type="text"
                name="pnum"
                placeholder="ex) 01012345678"
                pattern="[0-9]{9,11}"
                required
              />
            </div>
            <div class="form-group">
              <label for="role">역할</label>
              <div>
                <select name="role" id="role" onchange="roleFunction();">
                  <optgroup label="제출자">
                    <option value="H">보건소</option>
                    <option value="R">식당</option>
                  </optgroup>
                  <option value="E">평가자</option>
                </select>
              </div>
            </div>
            <div id="rsubmitter"></div>
            <button class="btn btn-primary" type="submit">가입하기</button>
          </form>
          <hr class="mb-3" />
          <div>이미 회원이신가요? <a href="/login"> 로그인하기</a></div>
        </div>
      </div>
    </div>
    <script>
      function roleFunction() {
        const rSubmitter = document.getElementById("rsubmitter");
        if (document.getElementById("role").value === "R") {
          rSubmitter.innerHTML =
            '<div class="form-group"><label for="rname">상호명</label><input class="form-control" type="text" name="rname" required/></div>';
          rSubmitter.innerHTML += '<div class="form-group">';
          rSubmitter.innerHTML +=
            '<label for="rlocate">가게 주소</label><div class="form-group">';
          rSubmitter.innerHTML +=
            '<label for="rgangnam" class="radio"><input type="radio" name="rlocate" value="강남" id="rgangnam" /> 강남 &nbsp; </label>';
          rSubmitter.innerHTML +=
            '<label for="ryongsan" class="radio"><input type="radio" name="rlocate" value="용산" id="ryongsan" /> 용산 &nbsp; </label>';
          rSubmitter.innerHTML +=
            '<label for="rseodaemun" class="radio"><input type="radio" name="rlocate" value="서대문" id="rseodaemun" /> 서대문 &nbsp; </label></div>';
          rSubmitter.innerHTML +=
            '<div class="form-group"><label for="rpnum">가게 전화번호</label><input class="form-control" type="text" name="rpnum" required/></div>';
        } else {
          rSubmitter.innerHTML = " ";
        }
      }
    </script>
  </body>
</html>
